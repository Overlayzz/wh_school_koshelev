# Схема `dictionary`

## **Таблица `Position`**
##### Используется для хранения информации о должности сотрудника
| Поле         | Тип данных       | Ограничения | Описание                                     |
| ------------ |------------------|-------------| -------------------------------------------- |
| position_id  | SMALLSERIAL      | NOT NULL    | Уникальный идентификатор должности            |
| name         | VARCHAR(100)     | NOT NULL    | Название должности                           |
| salary       | NUMERIC(15, 2)   | NOT NULL    | Заработная плата           |

## **Таблица `FoodType`**
##### Используется для хранения информации о типе еды(Напиток, пицца, бургер, и т.п.)
| Поле         | Тип данных   | Ограничения | Описание                           |
| ------------ | ------------ |-------------|------------------------------------|
| foodtype_id  | SMALLSERIAL  | NOT NULL    | Уникальный идентификатор типа пищи |
| name         | VARCHAR(100) | NOT NULL    | Название типа еды                  |

## **Таблица `IngredientType`**
##### Используется для хранения информации о типе ингредиента, для того чтобы определить где его хранить (Например, скоропортящиеся продукты в холодильнике, обычные продукты просто на полках)
| Поле              | Тип данных   | Ограничения | Описание                                           |
| ----------------- | ------------ |-------------| -------------------------------------------------- |
| ingredienttype_id | SMALLSERIAL  | NOT NULL    | Уникальный идентификатор типа ингредиента           |
| storageblock_id   | INTEGER      | NOT NULL    | Идентификатор блока хранения    |
| name              | VARCHAR(100) | NOT NULL    | Название типа ингредиента                           |

## **Таблица `Ingredient`**
##### Используется для хранения информации об ингредиентах
| Поле              | Тип данных   | Ограничения | Описание                                           |
| ----------------- | ------------ |-------------| -------------------------------------------------- |
| ingredient_id     | SMALLSERIAL  | NOT NULL    | Уникальный идентификатор ингредиента                |
| name              | VARCHAR(100) | NOT NULL    | Название ингредиента                               |
| ingredienttype_id | INTEGER      | NOT NULL    | Идентификатор типа ингредиента     |

## **Таблица `StorageBlock`**
##### Используется для хранения информации о месте хранения ингредиентов
| Поле            | Тип данных   | Ограничения | Описание                         |
| --------------- | ------------ |-------------| -------------------------------- |
| storageblock_id | SMALLSERIAL  | NOT NULL    | Уникальный идентификатор блока хранения |
| place           | VARCHAR(100) | NOT NULL    | Место, где расположен блок хранения    |

## **Функция `Position_upd`**
Пример вызова функции:

```sql
SELECT dictionary.position_upd('[
  {
    "position_id": 6,
    "name": "Уборщик",
    "salary": "30000.00"
  }
]');
```
***Примечания:***
- Если уже существует запись с таким же идентификатором id, то данные заменяются на входящие

Результат успешного выполнения функции:
```json
{"data": null}
```

Результат выполнения с ошибкой(такая должность уже существует):
```json
{
  "errors": [
    {
      "error": "dictionary.position_upd.duplicate",
      "detail": "",
      "message": "Такая запись уже существует!"
    }
  ]
}
```

## **Функция `FoodType_upd`**
Пример вызова функции:

```sql
SELECT dictionary.foodtype_upd('[
  {
    "foodtype_id": 7,
    "name": "Бургеры"
  }
]');
```
***Примечания:***
- Если уже существует запись с таким же идентификатором id, то данные заменяются на входящие

Результат успешного выполнения функции:
```json
{"data": null}
```

Результат выполнения с ошибкой(такой тип уже существует):
```json
{
  "errors": [
    {
      "error": "dictionary.foodtype_upd.duplicate",
      "detail": "",
      "message": "Такая запись уже существует!"
    }
  ]
}
```

## **Функция `Ingredient_upd`**
Пример вызова функции:

```sql
SELECT dictionary.ingredient_upd('[
  {
    "ingredient_id": 14,
    "name": "Фарфалле",
    "ingredienttype_id": "4"
  }
]');
```
***Примечания:***
- Если уже существует запись с таким же идентификатором id, то данные заменяются на входящие

Результат успешного выполнения функции:
```json
{"data": null}
```

Результат выполнения с ошибкой(такой ингредиент уже существует):
```json
{
  "errors": [
    {
      "error": "dictionary.ingredient_upd.duplicate",
      "detail": "",
      "message": "Такая запись уже существует!"
    }
  ]
}
```

## **Функция `IngredientType_upd`**
Пример вызова функции:

```sql
SELECT dictionary.ingredienttype_upd('[
  {
    "ingredienttype_id": 5,
    "name": "Картофель",
    "storageblock_id": "1"
  }
]');
```
***Примечания:***
- Если уже существует запись с таким же идентификатором id, то данные заменяются на входящие

Результат успешного выполнения функции:
```json
{"data": null}
```

Результат выполнения с ошибкой(такой тип уже существует):
```json
{
  "errors": [
    {
      "error": "dictionary.ingredienttype_upd.duplicate",
      "detail": "",
      "message": "Такая запись уже существует!"
    }
  ]
}
```

## **Функция `StorageBlock_upd`**
Пример вызова функции:

```sql
SELECT dictionary.storageblock_upd('[
  {
    "storageblock_id": "6",
    "place": "Холодильник_1"
  }
]');
```
***Примечания:***
- Если уже существует запись с таким же идентификатором id, то данные заменяются на входящие

Результат успешного выполнения функции:
```json
{"data": null}
```

Результат выполнения с ошибкой(такой блок уже существует):
```json
{
  "errors": [
    {
      "error": "dictionary.storageblock_upd.duplicate",
      "detail": "",
      "message": "Такая запись уже существует!"
    }
  ]
}
```

## **Функция `Position_getInfo`**
Пример вызова функции:

```sql
SELECT dictionary.position_getinfo(5);
```
***Примечания:***
* Фильтр для поля position_id

Результат успешного выполнения функции:
```json
{
  "data": [
    {
      "name": "Официант",
      "salary": 40000,
      "position_id": 5
    }
  ]
}
```

## **Функция `FoodType_getInfo`**
Пример вызова функции:

```sql
SELECT dictionary.foodtype_getinfo(2);
```
***Примечания:***
* Фильтр для поля foodtype_id

Результат успешного выполнения функции:
```json
{
  "data": [
    {
      "name": "Пицца",
      "foodtype_id": 2
    }
  ]
}
```

## **Функция `IngredientType_getInfo`**
Пример вызова функции:

```sql
SELECT dictionary.ingredienttype_getinfo(4, NULL);
```
***Примечания:***
* Присутствуют фильтры для полей: ingredienttype_id, storageblock_id

Результат успешного выполнения функции:
```json
{
  "data": [
    {
      "name": "Макароны",
      "storageblock_id": 5,
      "ingredienttype_id": 4
    }
  ]
}
```

## **Функция `Ingredient_getInfo`**
Пример вызова функции:

```sql
SELECT dictionary.ingredient_getinfo(4, NULL);
```
***Примечания:***
* Присутствуют фильтры для полей: ingredient_id, ingredienttype_id

Результат успешного выполнения функции:
```json
{
  "data": [
    {
      "name": "Курица",
      "ingredient_id": 4,
      "ingredienttype_id": 2
    }
  ]
}
```

## **Функция `StorageBlock_getInfo`**
Пример вызова функции:

```sql
SELECT dictionary.storageblock_getinfo(1);
```
***Примечания:***
* Фильтр для поля foodtype_id

Результат успешного выполнения функции:
```json
{
  "data": [
    {
      "place": "Полка_1",
      "storageblock_id": 1
    }
  ]
}
```